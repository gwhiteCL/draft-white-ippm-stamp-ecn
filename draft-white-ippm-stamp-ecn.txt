



IP Performance Measurement                                      G. White
Internet-Draft                                                 CableLabs
Intended status: Standards Track                        14 November 2024
Expires: 18 May 2025


 Simple Two-Way Active Measurement Protocol (STAMP) Extension for DSCP
                     and ECN Traversal Measurement
                   draft-white-ippm-stamp-ecn-latest

Abstract

   The Simple Two-Way Active Measurement Protocol (STAMP) enables path
   measurements between IP hosts, and has a facility for defining
   optional extensions.  This document defines a STAMP extension to
   enable the measurement of traversal of the ECN field between two
   STAMP hosts.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 18 May 2025.

Copyright Notice

   Copyright (c) 2024 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
     1.1.  Requirements Language
   2.  DSCP and ECN Traversal STAMP Extension
   3.  IANA Considerations
   4.  Security Considerations
   5.  References
     5.1.  Normative References
     5.2.  Informative References
   Acknowledgements
   Contributors
   Author's Address

1.  Introduction

   Section 4.4 of [RFC8972] defines a "Class of Service TLV" extension
   for the STAMP protocol [RFC8762] which enables bi-directional
   measurement of DSCP traversal, but only allows round-trip measurement
   of ECN traversal.  Since the ECN field is separately meaningful in
   each path direction, it is valuable to have the capability to perform
   bi-directional measurements of ECN traversal.  In addition, bi-
   directional traversal measurements are important to isolate traversal
   issues for path remediation actions.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

2.  DSCP and ECN Traversal STAMP Extension

   The STAMP session-sender MAY include a DSCP and ECN TLV in the STAMP
   test packet.  The format of the TLV is presented in Figure 1.

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |STAMP TLV Flags|      Type     |           Length              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   DSCP1   |EC1|  DSCP2    |EC2| RP|    Reserved               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 Figure 1: DSCP and ECN Traversal TLV

   The fields are defined as follows.

   *  STAMP TLV Flags: eight-bit field; format presented in [RFC8972].

   *  Type: one-octet field; value 179 allocated by this specification

   *  Length: two-octet field; set equal to the value 4 octets

   *  DSCP1: differentiated services code point intended by the session-
      sender to be used as the DSCP value of the reflected test packet

   *  EC1: ECN value intended by the session-sender to be used as the
      ECN value of the reflected test packet

   *  DSCP2: received value in the DSCP field at the ingress of the
      session-reflector

   *  EC2: received value in the ECN field at the ingress of the
      session-reflector

   *  RP (reverse path): two-bit field A session-sender MUST set the
      value of the RP field to 0 on transmission.

   *  Reserved: fourteen-bit field to be zeroed on transmission and
      ignored on receipt

   A session-reflector that receives a test packet with the DSCP and ECN
   Traversal TLV MUST include the DSCP and ECN Traversal TLV in the
   reflected test packet.

   The session-reflector MUST copy the value of the DSCP and ECN fields
   of the IP header of the received STAMP test packet into the DSCP2
   field and EC2 field in the reflected test packet.  Finally, the
   session-reflector MUST use the local policy to verify whether the CoS
   corresponding to the value of the DSCP1 field is permitted in the
   domain.  If the corresponding CoS is permitted in the domain, the
   session-reflector MUST set the DSCP field's value in the IP header of
   the reflected test packet equal to the value of the DSCP1 field of
   the received test packet.  If the corresponding CoS is not permitted
   in the domain, the session-reflector MUST use the DSCP value of the
   received STAMP packet and set the value of the RP field to 1.  Upon
   receiving the reflected packet, if the value of the RP field is 0,
   the session-sender will save the DSCP and ECN values for analysis of
   the CoS in the reverse direction.  If the value of the RP field in
   the received reflected packet is 1, only CoS in the forward direction
   can be analyzed.

3.  IANA Considerations

   Add this TLV 179 to the IANA STAMP Extensions Registry.

4.  Security Considerations

   This document should not affect the security of the Internet.

5.  References

5.1.  Normative References

   [RFC8972]  Mirsky, G., Min, X., Nydell, H., Foote, R., Masputra, A.,
              and E. Ruffini, "Simple Two-Way Active Measurement
              Protocol Optional Extensions", RFC 8972,
              DOI 10.17487/RFC8972, January 2021,
              <https://www.rfc-editor.org/info/rfc8972>.

   [RFC8762]  Mirsky, G., Jun, G., Nydell, H., and R. Foote, "Simple
              Two-Way Active Measurement Protocol", RFC 8762,
              DOI 10.17487/RFC8762, March 2020,
              <https://www.rfc-editor.org/info/rfc8762>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

5.2.  Informative References

Acknowledgements

   TBD

Contributors

   TBD

Author's Address

   Greg White
   CableLabs
   858 Coal Creek Circle
   Louisville, Colorado 80027
   United States of America
   Email: g.white@cablelabs.com
   URI:   http://www.cablelabs.com
